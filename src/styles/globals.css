@custom-variant dark (&:is(.dark *));

/* =============================================================================
 * ANDURIL TACTICAL DESIGN SYSTEM
 *
 * A military-grade aesthetic for safety-critical monitoring systems.
 * Dark-first design language with tactical greens, electric blues,
 * warning ambers, and critical reds against deep charcoal surfaces.
 * ============================================================================= */

/* =============================================================================
 * 1. COLOR PALETTE - Tactical Dark Theme
 *
 * Background hierarchy (darkest to lightest):
 *   --background:  #0a0e14  "void"       - deepest canvas
 *   --card:        #0f1419  "surface-1"  - primary panels
 *   --popover:     #141a22  "surface-2"  - elevated overlays
 *   --muted:       #1a2230  "surface-3"  - inset/recessed areas
 *   --accent:      #1e293b  "surface-4"  - hover/active surfaces
 *
 * Semantic accent colors:
 *   --tactical-green:   #22c55e  - operational / nominal / success
 *   --electric-blue:    #38bdf8  - primary actions / focus / links
 *   --warning-amber:    #f59e0b  - caution / warning states
 *   --critical-red:     #ef4444  - destructive / critical / alarm
 *   --info-cyan:        #06b6d4  - informational / data highlights
 *   --neutral-slate:    #64748b  - muted text / disabled states
 *
 * Chart palette (designed for dark backgrounds, high contrast):
 *   --chart-1: electric blue    (primary data series)
 *   --chart-2: tactical green   (positive/success metrics)
 *   --chart-3: warning amber    (caution indicators)
 *   --chart-4: info cyan        (secondary data series)
 *   --chart-5: critical red     (alert/failure metrics)
 * ============================================================================= */

:root {
  /* -- Font system -- */
  --font-size: 15px;
  --font-sans: "Inter", "SF Pro Display", system-ui, -apple-system, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", "SF Mono", "Cascadia Code", ui-monospace, monospace;
  --font-display: "Inter", "SF Pro Display", system-ui, -apple-system, sans-serif;
  --font-weight-normal: 400;
  --font-weight-medium: 500;

  /* -- Tactical dark palette (default is dark-first) -- */
  --background: #0a0e14;
  --foreground: #e2e8f0;
  --card: #0f1419;
  --card-foreground: #e2e8f0;
  --popover: #141a22;
  --popover-foreground: #e2e8f0;
  --primary: #38bdf8;
  --primary-foreground: #020617;
  --secondary: #1a2230;
  --secondary-foreground: #cbd5e1;
  --muted: #1a2230;
  --muted-foreground: #64748b;
  --accent: #1e293b;
  --accent-foreground: #e2e8f0;
  --destructive: #ef4444;
  --destructive-foreground: #fef2f2;
  --border: rgba(56, 189, 248, 0.12);
  --input: rgba(56, 189, 248, 0.08);
  --input-background: #0f1419;
  --switch-background: #1e293b;
  --ring: rgba(56, 189, 248, 0.4);

  /* -- Tactical accent tokens -- */
  --tactical-green: #22c55e;
  --tactical-green-dim: rgba(34, 197, 94, 0.15);
  --tactical-green-glow: rgba(34, 197, 94, 0.3);
  --electric-blue: #38bdf8;
  --electric-blue-dim: rgba(56, 189, 248, 0.12);
  --electric-blue-glow: rgba(56, 189, 248, 0.25);
  --warning-amber: #f59e0b;
  --warning-amber-dim: rgba(245, 158, 11, 0.15);
  --warning-amber-glow: rgba(245, 158, 11, 0.3);
  --critical-red: #ef4444;
  --critical-red-dim: rgba(239, 68, 68, 0.15);
  --critical-red-glow: rgba(239, 68, 68, 0.3);
  --info-cyan: #06b6d4;
  --info-cyan-dim: rgba(6, 182, 212, 0.15);

  /* -- Chart colors (optimized for dark tactical backgrounds) -- */
  --chart-1: #38bdf8;
  --chart-2: #22c55e;
  --chart-3: #f59e0b;
  --chart-4: #06b6d4;
  --chart-5: #ef4444;

  /* -- Geometry -- */
  --radius: 0.25rem;

  /* -- Sidebar (command panel) -- */
  --sidebar: #080c12;
  --sidebar-foreground: #e2e8f0;
  --sidebar-primary: #38bdf8;
  --sidebar-primary-foreground: #020617;
  --sidebar-accent: #1e293b;
  --sidebar-accent-foreground: #e2e8f0;
  --sidebar-border: rgba(56, 189, 248, 0.1);
  --sidebar-ring: rgba(56, 189, 248, 0.4);

  /* -- Grid overlay -- */
  --grid-color: rgba(56, 189, 248, 0.04);
  --grid-size: 24px;
  --scanline-opacity: 0.03;
}

/* Light mode override (minimal - the system is dark-first) */
.light {
  --background: #f1f5f9;
  --foreground: #0f172a;
  --card: #ffffff;
  --card-foreground: #0f172a;
  --popover: #ffffff;
  --popover-foreground: #0f172a;
  --primary: #0284c7;
  --primary-foreground: #f0f9ff;
  --secondary: #e2e8f0;
  --secondary-foreground: #0f172a;
  --muted: #e2e8f0;
  --muted-foreground: #475569;
  --accent: #e2e8f0;
  --accent-foreground: #0f172a;
  --destructive: #dc2626;
  --destructive-foreground: #ffffff;
  --border: rgba(0, 0, 0, 0.1);
  --input: rgba(0, 0, 0, 0.05);
  --input-background: #f8fafc;
  --switch-background: #cbd5e1;
  --ring: rgba(2, 132, 199, 0.4);
  --chart-1: #0284c7;
  --chart-2: #16a34a;
  --chart-3: #d97706;
  --chart-4: #0891b2;
  --chart-5: #dc2626;
  --sidebar: #f8fafc;
  --sidebar-foreground: #0f172a;
  --sidebar-primary: #0284c7;
  --sidebar-primary-foreground: #f0f9ff;
  --sidebar-accent: #e2e8f0;
  --sidebar-accent-foreground: #0f172a;
  --sidebar-border: rgba(0, 0, 0, 0.08);
  --sidebar-ring: rgba(2, 132, 199, 0.4);
  --grid-color: rgba(0, 0, 0, 0.03);
  --scanline-opacity: 0;
}

/* Dark mode class (same as default, for explicit toggling) */
.dark {
  --background: #0a0e14;
  --foreground: #e2e8f0;
  --card: #0f1419;
  --card-foreground: #e2e8f0;
  --popover: #141a22;
  --popover-foreground: #e2e8f0;
  --primary: #38bdf8;
  --primary-foreground: #020617;
  --secondary: #1a2230;
  --secondary-foreground: #cbd5e1;
  --muted: #1a2230;
  --muted-foreground: #64748b;
  --accent: #1e293b;
  --accent-foreground: #e2e8f0;
  --destructive: #ef4444;
  --destructive-foreground: #fef2f2;
  --border: rgba(56, 189, 248, 0.12);
  --input: rgba(56, 189, 248, 0.08);
  --input-background: #0f1419;
  --switch-background: #1e293b;
  --ring: rgba(56, 189, 248, 0.4);
  --chart-1: #38bdf8;
  --chart-2: #22c55e;
  --chart-3: #f59e0b;
  --chart-4: #06b6d4;
  --chart-5: #ef4444;
  --sidebar: #080c12;
  --sidebar-foreground: #e2e8f0;
  --sidebar-primary: #38bdf8;
  --sidebar-primary-foreground: #020617;
  --sidebar-accent: #1e293b;
  --sidebar-accent-foreground: #e2e8f0;
  --sidebar-border: rgba(56, 189, 248, 0.1);
  --sidebar-ring: rgba(56, 189, 248, 0.4);
  --grid-color: rgba(56, 189, 248, 0.04);
  --scanline-opacity: 0.03;
}

/* =============================================================================
 * 2. THEME TOKEN MAPPING (Tailwind CSS v4)
 * ============================================================================= */

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-input-background: var(--input-background);
  --color-switch-background: var(--switch-background);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  /* Tactical accent colors as Tailwind tokens */
  --color-tactical-green: var(--tactical-green);
  --color-tactical-green-dim: var(--tactical-green-dim);
  --color-electric-blue: var(--electric-blue);
  --color-electric-blue-dim: var(--electric-blue-dim);
  --color-warning-amber: var(--warning-amber);
  --color-warning-amber-dim: var(--warning-amber-dim);
  --color-critical-red: var(--critical-red);
  --color-critical-red-dim: var(--critical-red-dim);
  --color-info-cyan: var(--info-cyan);
  --color-info-cyan-dim: var(--info-cyan-dim);

  /* Sharp geometric radii */
  --radius-sm: calc(var(--radius) - 2px);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 2px);
  --radius-xl: calc(var(--radius) + 4px);

  /* Sidebar tokens */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Font families */
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --font-display: var(--font-display);
}

/* =============================================================================
 * 3. BASE LAYER - Typography & Resets
 * ============================================================================= */

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
}

/**
 * Typography hierarchy - tactical precision type scale.
 * Headings use tighter tracking for a technical, precise feel.
 * Data and labels use the monospace stack where appropriate.
 */
@layer base {
  :where(:not(:has([class*=' text-']), :not(:has([class^='text-'])))) {
    h1 {
      font-size: 1.5rem;
      font-weight: 600;
      line-height: 1.35;
      letter-spacing: -0.02em;
      font-family: var(--font-display);
    }

    h2 {
      font-size: 1.25rem;
      font-weight: 600;
      line-height: 1.4;
      letter-spacing: -0.015em;
      font-family: var(--font-display);
    }

    h3 {
      font-size: 1.1rem;
      font-weight: 500;
      line-height: 1.45;
      letter-spacing: -0.01em;
    }

    h4 {
      font-size: 0.925rem;
      font-weight: 500;
      line-height: 1.5;
      letter-spacing: 0.01em;
      text-transform: uppercase;
    }

    p {
      font-size: 0.875rem;
      font-weight: var(--font-weight-normal);
      line-height: 1.6;
    }

    label {
      font-size: 0.75rem;
      font-weight: 500;
      line-height: 1.5;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    button {
      font-size: 0.8125rem;
      font-weight: 500;
      line-height: 1.5;
      letter-spacing: 0.02em;
    }

    input {
      font-size: 0.875rem;
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
      font-family: var(--font-mono);
    }
  }
}

html {
  font-size: var(--font-size);
}

/* =============================================================================
 * 4. ANIMATION KEYFRAMES - Tactical Micro-interactions
 *
 * All animations respect prefers-reduced-motion. When reduced motion is
 * preferred, animations degrade to instant transitions or are removed.
 * ============================================================================= */

@keyframes tactical-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes tactical-glow {
  0%, 100% { box-shadow: 0 0 4px var(--electric-blue-glow), inset 0 0 4px transparent; }
  50% { box-shadow: 0 0 12px var(--electric-blue-glow), inset 0 0 4px var(--electric-blue-dim); }
}

@keyframes scanline {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100vh); }
}

@keyframes data-stream {
  0% { background-position: 0% 0%; }
  100% { background-position: 0% 100%; }
}

@keyframes border-flow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes status-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes accordion-down {
  from { height: 0; }
  to { height: var(--radix-accordion-content-height); }
}

@keyframes accordion-up {
  from { height: var(--radix-accordion-content-height); }
  to { height: 0; }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* =============================================================================
 * 5. TACTICAL VISUAL EFFECTS - Utility Classes
 *
 * These classes provide the command-center aesthetic:
 * - Grid overlays for technical precision
 * - Scan-line effects for CRT/HUD feel
 * - Corner bracket decorations for tactical framing
 * - Glow effects for emphasis and active states
 * - Gradient borders for premium surface edges
 * ============================================================================= */

/* --- Grid overlay background --- */
.tactical-grid {
  background-image:
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
}

/* --- Subtle dot grid (less intense alternative) --- */
.tactical-dot-grid {
  background-image: radial-gradient(circle, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
}

/* --- Scan-line overlay (applied via ::after pseudo-element) --- */
.tactical-scanlines::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, var(--scanline-opacity)) 2px,
    rgba(0, 0, 0, var(--scanline-opacity)) 4px
  );
  z-index: 1;
}

/* --- Corner bracket decorations --- */
.tactical-corners {
  position: relative;
}

.tactical-corners::before,
.tactical-corners::after {
  content: "";
  position: absolute;
  width: 12px;
  height: 12px;
  pointer-events: none;
  z-index: 2;
}

.tactical-corners::before {
  top: -1px;
  left: -1px;
  border-top: 2px solid var(--electric-blue);
  border-left: 2px solid var(--electric-blue);
}

.tactical-corners::after {
  bottom: -1px;
  right: -1px;
  border-bottom: 2px solid var(--electric-blue);
  border-right: 2px solid var(--electric-blue);
}

/* Green variant corners */
.tactical-corners-green::before {
  border-top-color: var(--tactical-green);
  border-left-color: var(--tactical-green);
}

.tactical-corners-green::after {
  border-bottom-color: var(--tactical-green);
  border-right-color: var(--tactical-green);
}

/* Amber variant corners */
.tactical-corners-amber::before {
  border-top-color: var(--warning-amber);
  border-left-color: var(--warning-amber);
}

.tactical-corners-amber::after {
  border-bottom-color: var(--warning-amber);
  border-right-color: var(--warning-amber);
}

/* Red variant corners */
.tactical-corners-red::before {
  border-top-color: var(--critical-red);
  border-left-color: var(--critical-red);
}

.tactical-corners-red::after {
  border-bottom-color: var(--critical-red);
  border-right-color: var(--critical-red);
}

/* --- Glow effects --- */
.glow-blue {
  box-shadow: 0 0 8px var(--electric-blue-glow), 0 0 24px rgba(56, 189, 248, 0.08);
}

.glow-green {
  box-shadow: 0 0 8px var(--tactical-green-glow), 0 0 24px rgba(34, 197, 94, 0.08);
}

.glow-amber {
  box-shadow: 0 0 8px var(--warning-amber-glow), 0 0 24px rgba(245, 158, 11, 0.08);
}

.glow-red {
  box-shadow: 0 0 8px var(--critical-red-glow), 0 0 24px rgba(239, 68, 68, 0.08);
}

/* --- Animated pulse glow (for active/critical states) --- */
.glow-pulse-blue {
  animation: tactical-glow 2s ease-in-out infinite;
}

.glow-pulse-red {
  animation: tactical-glow 1.5s ease-in-out infinite;
  --electric-blue-glow: var(--critical-red-glow);
  --electric-blue-dim: var(--critical-red-dim);
}

/* --- Gradient border (neon edge effect) --- */
.tactical-border-gradient {
  position: relative;
  border: 1px solid transparent;
  background-clip: padding-box;
}

.tactical-border-gradient::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    var(--electric-blue),
    var(--info-cyan),
    var(--tactical-green)
  );
  z-index: -1;
  opacity: 0.3;
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  padding: 1px;
}

/* --- Status indicator dot (animated for critical) --- */
.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  display: inline-block;
  flex-shrink: 0;
}

.status-dot-nominal {
  background: var(--tactical-green);
  box-shadow: 0 0 6px var(--tactical-green-glow);
}

.status-dot-warning {
  background: var(--warning-amber);
  box-shadow: 0 0 6px var(--warning-amber-glow);
  animation: status-blink 2s ease-in-out infinite;
}

.status-dot-critical {
  background: var(--critical-red);
  box-shadow: 0 0 6px var(--critical-red-glow);
  animation: status-blink 1s ease-in-out infinite;
}

.status-dot-info {
  background: var(--electric-blue);
  box-shadow: 0 0 6px var(--electric-blue-glow);
}

/* --- Data label styling (monospace technical readouts) --- */
.data-label {
  font-family: var(--font-mono);
  font-size: 0.6875rem;
  font-weight: 500;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--muted-foreground);
}

.data-value {
  font-family: var(--font-mono);
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: -0.01em;
  font-variant-numeric: tabular-nums;
  color: var(--foreground);
}

.data-value-large {
  font-family: var(--font-mono);
  font-size: 1.75rem;
  font-weight: 700;
  letter-spacing: -0.02em;
  font-variant-numeric: tabular-nums;
  color: var(--foreground);
}

/* --- Tactical section header (uppercase, tracked, with rule) --- */
.section-header {
  font-family: var(--font-display);
  font-size: 0.6875rem;
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--muted-foreground);
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}

/* --- Fade-in animation for content areas --- */
.animate-fade-in-up {
  animation: fade-in-up 0.3s ease-out both;
}

/* --- Shimmer loading effect --- */
.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(56, 189, 248, 0.06),
    transparent
  );
  animation: shimmer 2s infinite;
}

/* --- HUD-style divider --- */
.tactical-divider {
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--border),
    var(--electric-blue-dim),
    var(--border),
    transparent
  );
  border: none;
}

/* --- Tactical chip (small labeled pill for metadata) --- */
.tactical-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  font-family: var(--font-mono);
  font-size: 0.6875rem;
  font-weight: 500;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  border-radius: 2px;
  background: var(--electric-blue-dim);
  color: var(--electric-blue);
  border: 1px solid rgba(56, 189, 248, 0.2);
}

.tactical-chip-green {
  background: var(--tactical-green-dim);
  color: var(--tactical-green);
  border-color: rgba(34, 197, 94, 0.2);
}

.tactical-chip-amber {
  background: var(--warning-amber-dim);
  color: var(--warning-amber);
  border-color: rgba(245, 158, 11, 0.2);
}

.tactical-chip-red {
  background: var(--critical-red-dim);
  color: var(--critical-red);
  border-color: rgba(239, 68, 68, 0.2);
}

/* =============================================================================
 * 6. COMPONENT-LEVEL OVERRIDES
 *
 * Tactical styling for Recharts and other third-party components
 * that require global CSS targeting.
 * ============================================================================= */

/* Recharts dark tactical theme */
.recharts-cartesian-axis-tick text {
  fill: var(--muted-foreground) !important;
  font-family: var(--font-mono) !important;
  font-size: 0.6875rem !important;
}

.recharts-cartesian-grid line {
  stroke: var(--border) !important;
}

.recharts-tooltip-wrapper .recharts-default-tooltip {
  background: var(--popover) !important;
  border: 1px solid var(--border) !important;
  border-radius: var(--radius) !important;
  font-family: var(--font-mono) !important;
  font-size: 0.75rem !important;
}

.recharts-legend-item-text {
  color: var(--muted-foreground) !important;
  font-family: var(--font-mono) !important;
  font-size: 0.6875rem !important;
}

/* =============================================================================
 * 7. SCROLLBAR STYLING
 *
 * Custom scrollbars that match the tactical aesthetic.
 * Thin, subtle, with tactical blue accents.
 * ============================================================================= */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--accent);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--muted-foreground);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--accent) transparent;
}
